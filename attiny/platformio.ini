[env:ATtiny1616]
platform = atmelmegaavr
board = ATtiny1616

; Build flags for optimization (bare metal, no framework)
build_flags = 
    -Os                    ; Optimize for size
    -DATTINY1616
    -ffunction-sections    ; Place each function in its own section
    -fdata-sections        ; Place each data in its own section
    -flto                  ; Enable link-time optimization
    -Wl,--gc-sections      ; Remove unused sections at link time
    
; Linker flags to remove unused sections
build_src_filter = +<*> -<.git/> -<stm32/>

; Upload settings (adjust based on your programmer)
upload_protocol = serialupdi
upload_speed = 115200
